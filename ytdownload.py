import os
import yt_dlp
import time
from colorama import init, Fore

def download_video(url, quality):
    downloads_folder = os.path.join(os.path.expanduser("~"), "Downloads")

    ydl_opts = {
        'format': f'best[height<={quality}]/worst[height<={quality}]',
        'outtmpl': os.path.join(downloads_folder, '%(title)s.%(ext)s'),
        'noplaylist': True,  
    }
    
    with yt_dlp.YoutubeDL(ydl_opts) as ydl:
        ydl.download([url])

def display_message():
    init(autoreset=True)  
    colors = [Fore.RED, Fore.GREEN, Fore.YELLOW, Fore.BLUE, Fore.MAGENTA, Fore.CYAN, Fore.WHITE]
    color_index = 0

    ascii_art = """
                                  ██████████████████                                          
                              ████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████                                    
                          ████░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████                                
                        ██▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░██                              
                      ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░▒▒██                            
                    ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒██                          
                  ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██                          
                  ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██                        
                ▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██                        
                ████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██                        
            ████▒▒░░██▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██                      
        ████░░▒▒██░░░░██▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██                      
      ██▒▒░░▒▒████▒▒░░██▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██▒▒▒▒▒▒██░░██▒▒▒▒██▒▒▒▒▒▒▒▒██                      
    ██▒▒▒▒▒▒████▒▒██░░░░██▒▒▒▒▒▒▒▒██▒▒▒▒██▒▒▒▒████░░░░██▒▒██░░██▒▒██▒▒██                      
    ██▒▒▒▒██▒▒██▒▒██▒▒██▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██▒▒██▓▓░░░░░░████░░░░██▒▒██▒▒██                      
      ████▒▒▒▒██▒▒██▒▒██▒▒▒▒██████▒▒▒▒▒▒████░░░░▓▓▓▓░░░░░░░░░░██▒▒██▒▒██                      
    ▓▓▒▒▒▒▒▒██▒▒▒▒▒▒██▒▒▒▒██░░░░██▒▒▒▒██░░██████░░░░▓▓      ▓▓████▒▒██                        
    ██▒▒▒▒▒▒██▒▒▒▒▒▒▒▒██▒▒██░░░░▓▓░░▒▒████████▓▓██░░░░    ▓▓░░░░████                          
  ▓▓▒▒▒▒▒▒██▓▓██▒▒▒▒░░██▒▒██░░▓▓▒▒▒▒░░██  ▒▒██  ░░▓▓      ░░▓▓▓▓██                            
  ██▒▒▒▒░░██▒▒▒▒██░░██▒▒▒▒██░░██▒▒▒▒▒▒██  ▒▒▒▒▒▒          ████░░██                            
  ██▒▒▒▒░░██▒▒▒▒██░░██▒▒▒▒▒▒████▒▒▒▒▒▒██                    ▒▒  ██                            
    ████▓▓██▒▒▒▒▓▓████▒▒▒▒▒▒▓▓██▒▒▒▒▒▒██  ░░░░                ████                            
          ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██              ░░██  ░░████                            
          ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██░░                  ██▒▒██                            
          ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██░░        ░░░░    ▓▓▓▓▒▒██                            
          ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒▒▒██░░      ░░    ██▒▒▒▒▒▒██                            
          ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██░░░░░░    ████▒▒██▒▒▒▒██                            
          ██▒▒▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▒▒▒▒██████████▒▒▒▒▒▒██▒▒▒▒██                            
            ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓████░░░░      ████▒▒██▒▒▒▒██                            
            ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██░░██░░            ██▒▒██▒▒▒▒██                          
            ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██░░██░░░░              ██▓▓▒▒▒▒██                          
            ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓░░██░░░░                  ██████                          
            ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██░░██░░░░                      ██  ██████                  
              ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██░░██░░██░░░░                      ████    ████              
              ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██░░██░░██░░░░░░                        ████░░░░▓▓██          
              ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██░░██░░██░░░░██░░░░                        ████    ██        
              ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██░░░░██░░██░░░░████░░░░                        ████  ██      
              ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██░░██░░██░░░░░░░░████░░░░                        ██  ██    
              ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██░░██░░██░░  ░░░░░░░░████░░░░                          ██  
              ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██░░░░██░░██░░    ░░░░░░░░████░░░░                      ██  
            ▓▓▓▓▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒██░░░░██░░██░░      ░░░░░░░░░░▒▒▓▓░░░░░░                ░░██
            ██▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒██░░██░░██░░░░      ░░░░░░██░░░░██████░░░░              ██
            ██▒▒▒▒▒▒██▒▒▒▒▒▒▒▒▒▒▒▒████░░░░██░░██░░░░░░░░░░████      ░░░░░░████░░░░          ██
            ██▒▒▒▒██  ██▒▒▒▒▒▒▒▒▒▒████░░░░██░░██░░▓▓▒▒▓▓▓▓░░░░  ▓▓▓▓  ░░░░░░░░▓▓▓▓░░░░░░░░▓▓  
            ██▒▒▒▒██  ██▒▒▒▒▒▒▒▒▒▒▓▓██░░░░████████░░      ▓▓▓▓▓▓░░░░████░░░░██    ██▓▓▓▓▓▓    
          ██▒▒▒▒▒▒██    ██▒▒▒▒▒▒▓▓  ██████░░░░░░░░████████░░░░░░░░░░░░░░████                  
          ██▒▒▒▒██      ██▒▒▒▒▒▒██  ██░░░░████████░░░░░░░░░░░░░░    ░░░░██                    
          ██▒▒▒▒██      ██▒▒▒▒██      ▓▓▓▓░░░░░░░░░░░░░░░░░░░░░░      ░░██                    
                
    """

    while True:
        print(colors[color_index] + ascii_art)
        print(colors[color_index] + "Created by ayksi", end='\r')
        time.sleep(1)
        color_index = (color_index + 1) % len(colors)

if __name__ == "__main__":
    video_url = input("Podaj URL do filmu na YouTube: ")

    print("\nWybierz jakość do pobrania:")
    print("1. Najwyższa dostępna jakość (do 1080p)")
    print("2. 1080p")
    print("3. 720p")
    print("4. 480p")

    choice = input("\nTwój wybór (1/2/3/4): ")

    if choice == '1':
        quality = '1080'
    elif choice == '2':
        quality = '1080'
    elif choice == '3':
        quality = '720'
    elif choice == '4':
        quality = '480'
    else:
        print("Nieprawidłowy wybór, pobieranie w najwyższej dostępnej jakości.")
        quality = '1080'

    download_video(video_url, quality)
    
    display_message()
